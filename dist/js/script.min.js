!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e=(e,t)=>{let n=document.createElement("template");e=(e=>`<li>\n            <span class="check" data-id="${e.id}"></span>\n            <span class="id">#${e.id}</span>\n            <span class="restaurant">\n                <a href="${e.url}" target="_blank">\n                    ${e.image}\n                    <span>${e.name}</span> \n                </a>\n            </span>\n            <span class="status">\n                <span class="${e.status}">${e.status}</span>\n            </span>\n            <span class="start-date">${e.startDate}</span>\n            <span class="end-date">${e.endDate}</span>\n            <span class="total">$${e.total}</span>\n            <span class="fees">$${e.fees}</span>\n            <span class="orders">${e.orders}</span>\n        </li>`)(e).trim(),n.innerHTML=e,t.appendChild(n.content.firstChild)},t=e=>{for(const t of e.querySelectorAll("li"))e.removeChild(t)};let n="",a=1,s="",c="",i="";const r=e=>{a=parseInt(e)},o=(e,t,n)=>{let a=document.createElement("template");e=l(e,t).trim(),a.innerHTML=e,n.appendChild(a.content.firstChild)},l=(e,t)=>{let n="invoice-change-page";return e==t&&(n+=" active"),`<li><a href="#${e}" class="${n}" data-page="${e}">${e}</a><li>`},d=(l,p)=>{l.classList.add("loading"),p.style.pointerEvents="none";const u=l.parentNode.querySelector("#pagination__count"),v=l.parentNode.querySelector("#pagination__nav");t(l),t(v),fetch(appCreateit.jsonurl+"createit/ivoices/?status="+n+"&page="+a+"&search="+s+"&dateStart="+c+"&dateEnd="+i,{method:"GET"}).then((e=>e.json())).then((t=>{if(!t.items.length)return l.innerHTML='<li class="nothing-found">Nothing found</li>',void(u.innerText="");for(let n of Object.values(t.items))e(n,l);for(let e=1;e<t.maxPage+1;e++)o(e,t.currentPage,v);var n,a;u.innerText=(n=t.currentPage,a=t.maxPage,`Page ${n} of ${a}`)})).then((()=>{l.classList.remove("loading"),(e=>{for(const t of e)t.addEventListener("click",(e=>{e.preventDefault(),t.classList.toggle("active")}))})(l.querySelectorAll(".check")),p.style.pointerEvents="auto",((e,t,n)=>{const a=e.querySelectorAll("li a");for(const e of a)e.addEventListener("click",(s=>{if(s.preventDefault(),!e.classList.contains("active")){for(const e of a)e.classList.remove("active");e.classList.add("active"),r(e.dataset.page),d(t,n)}}))})(v,l,p)})).catch((e=>{}))},p=(e,t,n)=>{e.addEventListener("click",(a=>{a.preventDefault();const c=e.parentNode.querySelector("#invoice-search--field").value;c!==s&&(r(1),s=c,d(t,n))}))},u=(e,t,n)=>{e.addEventListener("click",(a=>{a.preventDefault();const s=e.parentNode.querySelector("#invoice-date-piceker--start").value,o=e.parentNode.querySelector("#invoice-date-piceker--end").value;c==s&&i==o||(s&&!o||!s&&o||s>o?alert("Please correct the date"):(r(1),c=s,(e=>{i=e})(o),d(t,n)))}))},v=(e,t,n)=>{n.addEventListener("click",(n=>{n.preventDefault();const a=e.querySelectorAll("li .check.active");if(!a.length)return void alert("Check elements to change");let s=[];for(const e of a)s.push(parseInt(e.dataset.id));s.length&&((e,t,n)=>{e.classList.add("loading"),t.style.pointerEvents="none";const a=new FormData;a.append("nonce",appCreateit.nonce),a.append("action","createit_change_status"),a.append("ids",JSON.stringify(n)),fetch(appCreateit.ajaxurl,{method:"POST",credentials:"same-origin",body:a}).then((e=>e.json())).then((n=>{n.success&&(r(1),d(e,t))})).catch((e=>{}))})(e,t,s)}))};(()=>{const e=document.querySelector("#invoices");if(!e)return;const t=e.querySelector("#result-invoice"),a=e.querySelector(".invoice-nav"),s=e.querySelectorAll("#invoice-status .toggler-status"),c=e.querySelector("#invoice-search--submit"),i=e.querySelector("#invoice-date-piceker--submit"),o=a.querySelector("#invoice-button-paid");d(t,a),((e,t,a)=>{for(const s of e)s.addEventListener("click",(c=>{if(c.preventDefault(),!s.classList.contains("active")){for(const t of e)t.classList.remove("active");var i;s.classList.add("active"),r(1),i=s.dataset.status,n=i,d(t,a)}}))})(s,t,a),p(c,t,a),u(i,t,a),v(t,a,o)})()}));
//# sourceMappingURL=script.min.js.map